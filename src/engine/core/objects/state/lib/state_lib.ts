import { anim, CSightParams, look, move } from "xray16";

import { getStateLibAnimationPoints } from "@/engine/core/objects/state/lib/state_lib_animpoint";
import { add_state_lib_pri_a15 } from "@/engine/core/objects/state/lib/state_mgr_pri_a15";
import { getStateLibScenarios } from "@/engine/core/objects/state/lib/state_mgr_scenario";
import { EWeaponAnimationType, IStateDescriptor } from "@/engine/core/objects/state/types";
import { copyTable } from "@/engine/core/utils/table";

/**
 * List of default state descriptors to use in scripts.
 */
export const states: LuaTable<string, IStateDescriptor> = {
  idle: {
    weapon: null,
    movement: null,
    mental: null,
    bodystate: null,
    animstate: null,
    animation: null,
  },
  smartcover: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: null,
    mental: null,
    bodystate: null,
    animstate: null,
    animation: null,
    direction: CSightParams.eSightTypeAnimationDirection,
  },
  walk: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.walk,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  walk_noweap: {
    weapon: EWeaponAnimationType.NONE,
    movement: move.walk,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  run: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.run,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  sprint: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.run,
    mental: anim.panic,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  patrol: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.walk,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  patrol_fire: {
    weapon: EWeaponAnimationType.FIRE,
    movement: move.walk,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  raid: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.walk,
    mental: anim.danger,
    special_danger_move: true,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  raid_fire: {
    weapon: EWeaponAnimationType.FIRE,
    movement: move.walk,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  sneak: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.walk,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: null,
  },
  sneak_run: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.run,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: null,
  },
  sneak_no_wpn: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.walk,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: null,
  },
  sneak_fire: {
    weapon: EWeaponAnimationType.FIRE,
    movement: move.walk,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: null,
  },
  assault: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.run,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  assault_fire: {
    weapon: EWeaponAnimationType.FIRE,
    movement: move.run,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  rush: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.run,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  wait: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "idle",
  },
  wait_trade: {
    weapon: EWeaponAnimationType.NONE,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "idle",
  },
  wait_na: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  guard: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "idle",
  },
  guard_chasovoy: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "idle_chasovoy",
  },
  guard_na: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  guard_fire: {
    weapon: EWeaponAnimationType.FIRE,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  threat: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: null,
    isForced: true,
  },
  threat_danger: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: "bloodsucker_search",
  },
  give_orders: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: "give_orders",
  },
  threat_heli: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  threat_na: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: null,
    isForced: true,
  },
  threat_fire: {
    weapon: EWeaponAnimationType.FIRE,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  threat_sniper_fire: {
    weapon: EWeaponAnimationType.SNIPER_FIRE,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: null,
  },
  hide: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: "hide",
  },
  hide_na: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: null,
  },
  hide_fire: {
    weapon: EWeaponAnimationType.FIRE,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: null,
  },
  hide_sniper_fire: {
    weapon: EWeaponAnimationType.SNIPER_FIRE,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: null,
  },
  caution: {
    weapon: null,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "caution",
  },
  choose: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "choosing",
  },
  press: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "press",
  },
  ward: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "warding",
  },
  ward_short: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "warding_short",
  },
  ward_noweap: {
    weapon: EWeaponAnimationType.NONE,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "warding",
  },
  ward_noweap_short: {
    weapon: EWeaponAnimationType.NONE,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "warding_short",
  },
  fold_arms: {
    weapon: EWeaponAnimationType.NONE,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "fold_arms",
  },

  search: {
    weapon: null,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "poisk",
  },
  stoop_no_weap: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "stoop_no_weap",
  },
  salut: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "salut",
  },
  salut_free: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "salut_free",
  },
  prisoner: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: null,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: "prisoner",
  },

  hide_no_wpn: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: "hide",
  },
  // -- ������� ���������
  sit: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: "sit",
    animation: null,
  },
  sit_knee: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: "sit_knee",
    animation: null,
  },
  sit_ass: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: "sit_ass",
    animation: null,
  },

  play_guitar: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: "sit_knee",
    animation: "play_guitar",
  },
  play_harmonica: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: "sit_ass",
    animation: "play_harmonica",
  },

  sleep: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "sleeping",
  },

  hello: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "hello",
  },
  hello_wpn: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "hello",
  },

  refuse: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "refuse",
  },
  claim: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: "claim",
  },
  backoff: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: "backoff",
  },
  backoff2: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: "backoff",
  },
  punch: {
    weapon: null,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: "punch",
  },

  search_corpse: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: "search_corpse",
  },

  help_wounded: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: "help_wounded",
  },

  dynamite: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: "dynamite",
  },

  binocular: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "binocular",
  },
  hide_rac: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    animstate: null,
    animation: "cr_raciya",
  },
  wait_rac: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "raciya",
  },
  wait_rac_noweap: {
    weapon: EWeaponAnimationType.NONE,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "raciya",
  },
  wait_rac_stc: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "raciya_stc",
  },
  guard_rac: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "raciya",
  },

  probe_stand: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_stand",
  },
  probe_stand_detector_advanced: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_stand_detector_advanced",
  },
  probe_stand_detector_elite: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_stand_detector_elite",
  },
  probe_way: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_way",
  },
  probe_way_detector_advanced: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_way_detector_advanced",
  },
  probe_way_detector_elite: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_way_detector_elite",
  },
  probe_crouch: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_crouch",
  },
  probe_crouch_detector_advanced: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_crouch_detector_advanced",
  },
  probe_crouch_detector_elite: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "probe_crouch_detector_elite",
  },

  scaner_stand: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "scaner_stand",
  },
  scaner_way: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "scaner_way",
  },

  scaner_crouch: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "scaner_crouch",
  },

  hands_up: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "hands_up",
  },

  // -- �������
  wounded: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    direction: look.cur_dir,
    animstate: null,
    animation: "wounded",
  },
  wounded_heavy: {
    weapon: EWeaponAnimationType.DROP,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    direction: look.cur_dir, // --CSightParams.eSightTypeAnimationDirection
    animstate: null,
    animation: "wounded_heavy_1",
  },
  wounded_heavy_2: {
    weapon: EWeaponAnimationType.DROP,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    direction: look.cur_dir,
    animstate: null,
    animation: "wounded_heavy_2",
  },
  wounded_heavy_3: {
    weapon: EWeaponAnimationType.DROP,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    direction: look.cur_dir,
    animstate: null,
    animation: "wounded_heavy_3",
  },
  wounded_zombie: {
    weapon: EWeaponAnimationType.DROP,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    direction: look.cur_dir,
    animstate: null,
    animation: "wounded_zombie",
  },
  trans_0: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "trans_0",
  },
  trans_1: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "trans_1",
  },
  trans_zombied: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "trans_zombied",
  },
  talk_default: {
    weapon: EWeaponAnimationType.STRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "talk_default",
  },
  psy_pain: {
    weapon: EWeaponAnimationType.DROP,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "psy_armed",
  },
  psy_armed: {
    weapon: EWeaponAnimationType.UNSTRAPPED,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "psy_armed",
  },
  psy_shoot: {
    weapon: EWeaponAnimationType.FIRE,
    weapon_slot: 1,
    movement: move.stand,
    mental: anim.free,
    bodystate: move.standing,
    animstate: null,
    animation: "psy_shoot",
  },
  lay_on_bed: {
    weapon: EWeaponAnimationType.DROP,
    movement: move.stand,
    mental: anim.danger,
    bodystate: move.crouch,
    direction: look.cur_dir,
    animstate: null,
    animation: "wounded_heavy_1",
  },
} as any;

copyTable(states, getStateLibAnimationPoints());
copyTable(states, getStateLibScenarios());
copyTable(states, add_state_lib_pri_a15());
